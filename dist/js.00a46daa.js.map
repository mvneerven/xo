{"version":3,"sources":["data/forms/form.js","js/index.js"],"names":["schema","model","schemas","person","instance","name","first","last","age","gender","contract","agree","logic","context","b","bindings","genderUnknown","includes","title","under18","continue","info","pages","legend","intro","fields","type","caption","bind","min","max","step","disabled","items","value","tooltip","visible","body","relevant","factory","window","xo","form","DOM","dom","log","ex","elm","parseHTML","toString","document","querySelector","appendChild","scrollIntoView","run","x","createForm","listen","load","renderForm","result","container","on","events","error","e","detail","build","defaults","validation","then"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["const schema = {\r\n    model: {\r\n        schemas: {\r\n            person: \"/data/json/schemas/person-schema.json\",\r\n        },\r\n        instance: {\r\n            person: {\r\n                name: {\r\n                    first: \"John\",\r\n                    last: \"Doe\"\r\n                },\r\n                age: 57,\r\n                gender: \"male\"\r\n            },\r\n            contract: {\r\n                agree: false\r\n            }\r\n        },\r\n        logic: context => {\r\n            const model = context.model, person = model.instance.person, b = model.bindings;\r\n            b.genderUnknown = !['male', 'female'].includes(person.gender);\r\n            b.title =\r\n                (b.genderUnknown ? '' : (person.gender === 'male' ? 'Mr ' : 'Mrs '))\r\n                + person.name.first + ' ' + person.name.last;\r\n            b.under18 = model.instance.person.age <= 17;\r\n            b.continue = !b.under18 && model.instance.contract.agree;\r\n            b.info = 'agree to proceed'\r\n        }\r\n    },\r\n    pages: [\r\n        {\r\n            legend: \"Page 1\",\r\n            intro: \"My form description\",\r\n            fields: [\r\n                {\r\n                    name: \"name\",\r\n                    type: \"name\",\r\n                    caption: \"Your name\",\r\n                    bind: \"instance.person.name\"\r\n                },\r\n                {\r\n                    name: \"age\",\r\n                    type: \"number\",\r\n                    min: 16,\r\n                    max: 110,\r\n                    step: 1,\r\n                    caption: \"Your age\",\r\n                    bind: \"instance.person.age\"\r\n                },\r\n                {\r\n                    name: \"gender\",\r\n                    type: \"dropdown\",\r\n                    disabled: \"@bindings.under18\",\r\n                    caption: \"Gender\",\r\n                    items: [\r\n                        {\r\n                            name: \"Please choose\",\r\n                            value: \"unknown\"\r\n                        },\r\n                        {\r\n                            name: \"Male\",\r\n                            value: \"male\"\r\n                        },\r\n                        {\r\n                            name: \"Female\",\r\n                            value: \"female\"\r\n                        },\r\n                        {\r\n                            name: \"Not important\",\r\n                            value: \"unspecified\"\r\n                        }\r\n                    ],\r\n                    bind: \"instance.person.gender\"\r\n                },\r\n                {\r\n                    name: \"agree\",\r\n                    type: \"checkbox\",\r\n                    caption: \"I have read the <a href='/terms'>terms & conditions</a> and agree to proceed\",\r\n                    tooltip: \"Check to continue\",\r\n                    bind: \"instance.contract.agree\"\r\n                },\r\n                {\r\n                    name: \"info\",\r\n                    visible: \"@bindings.under18\",\r\n                    type: \"dialog\",\r\n                    title: \"Info\",\r\n                    body: \"You have to be over 18 to continue\",\r\n                    bind: \"instance.contract.info\"\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            legend: \"Page 2\",\r\n            relevant: \"@instance.contract.agree\",\r\n            fields: [\r\n                {\r\n                    name: \"why\",\r\n                    type: \"multiline\",\r\n                    caption: \"@bindings.title, let us know what you think...\"\r\n                },\r\n                {\r\n                    type: \"checkboxlist\",\r\n                    name: \"checkboxlist\",\r\n                    caption: \"Checkboxlist\",\r\n                    items: [\r\n                        \"First\",\r\n                        \"Second\"\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}","import \"../data/forms/form\";\r\n\r\nconst factory = window.xo.form.factory,\r\n  DOM = window.xo.dom,\r\n  log = (ex) => {\r\n    const elm = DOM.parseHTML(`<div>Error: ${ex.toString()}</div>`);\r\n    document.querySelector(\"footer\").appendChild(elm);\r\n    elm.scrollIntoView();\r\n  };\r\n\r\nasync function run(context) {\r\n  const x = context.createForm();\r\n  listen(x);\r\n  await x.load(\"/data/forms/form.js\");\r\n  let result = await x.renderForm();\r\n  document.body.querySelector(\"main\").appendChild(result.container);\r\n}\r\n\r\nfunction listen(x) {\r\n  x.on(factory.events.error, (e) => {\r\n    log(e.detail.error);\r\n  });\r\n}\r\n\r\nfactory.build({ defaults: { validation: \"inline\" } }).then((context) => {\r\n  run(context);\r\n});\r\n"]}